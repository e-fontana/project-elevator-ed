module frequency #(parameter clk_freq = 50000000) (clk_50, led1, led2, led3, moving, clk, sos_mode);
	input clk_50, led1, led2, led3, moving, sos_mode;
	output reg clk;

	reg [25:0] counter;

	always @((posedge led1 or posedge led2 or posedge led3 & ~moving) counter <= 0;
	
	always @(posedge clk_50 & ~sos_mode) begin
		if (counter < clk_freq & moving) begin
			counter <= counter + 1;
			clk <= 0;
		end else begin
			counter <= 0;
			clk <= ~clk;
		end
	end
endmodule